#### 引用、指针、内存地址有什么区别？

1. 内存地址通常简称为地址，是有汇编语言提供的一种抽象概念
2. 指针有时又叫做原始指针，一个指针是一个内存地址，并且指向了某个类型的值。指针是有高级语言提供的一种抽象概念。
3. 引用是指针，在动态大小类型的情况下，一个引用是一个指针以及一个有额外保证的整数。引用是有rust提供的一种抽象钙概念。

- 内存地址和其他两个高级抽象之间的区别在于，高级抽象拥有他们的引用对象的类型信息。
- 相比指针，rust提供的引用能提供更多的好处
    1. 引用总是指向有效的数据
    2. 引用被正确的对齐为usize的倍数，
    3. 可以确保应用程序在使用该类型的时候，永远不会超出该类型所在的内存区域。

#### Rust中的原始指针

- 一个原始指针是一个没有Rust的标准保证的内存地址。他们在本质上是不安全的。举例来说，与引用（&T）不同，原始指针可以是NULL（空）的。
- 原始指针的语法有点奇怪，不可变和可变的原始指针分别表示为*const T 和 *mut T。例如：一个指向String的不可变原始指针为 *const
  String,一个指向i32的可变原始指针为 *mut i32。*const T 和 *mut T总是指向T的起始字节，并且他们还知道T类型的字节宽度。
- Rust的引用（&mut T 和 &T）会被向下编译为原始指针。这意味着我们不需要冒险进入unsafe块，就可以得到原始指针的性能。使用引用是有额外保证的。访问一个原始指针是不安全的。
- 原始指针的解引用必须放在unsafe中，因为原始指针可能指向NULL

#### Rust的指针生态系统

1. Raw Pointer
    1. *mut T 和 *const T，这哥俩是指针世界中的"自由激进分子"，速度非常快，但是非常不安全
    2. 能力：速度快；能与外部世界进行交互。
    3. 弱点：不安全
2. Box<T>
    1. 在箱子中存放任何东西，能够接受几乎任何类型，用于长时间的存储，也是新的"安全编程时代"的主力。
    2. 能力：在一个叫做"堆"的集中存储位置保存一个值。
    3. 弱点：占用更多空间。
3. Rc<T>
    1. 引用计数指针，Rc<T>是rust中能干、但却吝啬的"薄记员"。是谁、在什么时候、借用了什么东西，他都非常清楚。
    2. 能力：共享访问某些值。
    3. 弱点：占用更多空间；带来运行时开销；非线程安全。
4. Arc<T>
    1. Arc<T>是Rust中的"使节"。它能夸线程共享访问某些值，并且能够保证各线程共享访问时互不冲突。
    2. 能力：共享访问某些值；线程安全。
    3. 弱点：占用更多空间；带来运行时开销；非线程安全。
5. Cell<T>
    1. Cell<T>擅长的是变形，它能够修改不可变的值。
    2. 能力：内部可变性。
    3. 弱点：占用更多空间；性能低。
6. RefCell<T>
    1. 使用RefCell<T>可以在不可变引用中执行修改。这种古怪的能力会带来一些开销。
    2. 能力：内部可变性；可以嵌套在Rc和Arc中使用，Rc和Arc只能接收不可变的引用。
    3. 弱点：占用更多空间；带来运行时开销；缺少编译时保证。
7. Cow<T>
    1. 如果你只是需要读它，为什么还要在上面写下一些东西呢？可能是你需要在上面做出一些修改把。这就是Cow的作用了。
    2. 能力：当需要只读访问时，避免写入。
    3. 弱点：可能会占用更多的空间。
8. String
    1. String向我们展示了如何构建安全的抽象，可以把它当作一个如何处理用户输入的不确定性的指南。
    2. 能力：按需动态增长；在运行时保证编码正确性。
    3. 弱点：分配的空间大小可能会超过实际需要。
9. Vec<T>
    1. 程序中的主要存储系统。随着值的创建和销毁，Vec<T>始终保持数据的有序性。
    2. 能力：按需动态增长。
    3. 弱点：分配的空间大小可能会超过实际需要。
10. RawVec<T>
    1. Vec<T>的底层基石，当然也是其他许多动态大小类型的基石。它直到该如何根据需要提供一个"家"。
    2. 能力：按需动态增长；与内存分配器一起工作，找到要分配的空间。
    3. 弱点：一般不会直接应用在你的代码中。
11. Unique<T>
    1. 一个值的唯一拥有者，唯一能保证拥有完全控制的指针。
    2. 能力：诸如String等类型的基础类型，需要独占值。
    3. 弱点：不适合直接应用在你的代码中。
12. Shared<T>
    1. 要想实现共享所有权是困难的。
    2. 能力：共享所有权；能够分配T类型大小的内存，甚至这个T是零大小的也可以，那就无需占用内存空间了。
    3. 弱点：不适合直接应用在你的代码中。

#### 小结

- 从CPU的角度看，指针、引用和内存地址是同一个东西。但从编程语言的角度来看，他们有着很大的不同
- 标准库中的智能指针类型是使用许多底层构建快构建出来的，你也可以使用他们来构建自己的智能指针。