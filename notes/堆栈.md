#### 栈

1. 栈实际上包含两个级别的对象：栈帧和数据
2. 栈允许程序员去访问存储在其中的多个单元元素，而不仅仅是访问其顶部的条目
3. 栈可以包含任意大小的元素，而不是像餐盘来比所暗示的那样，所有元素必须是同样大小

- 栈中的条目叫做栈帧。当发生函数调用时，栈帧就被创建出来。当一个程序在执行时，在CPU中一个游标会更新，以反映出栈帧的当前地址。这个游标叫做栈指针。
- 栈的主要作用是为局部变量创建空间。那么为什么栈是快速的呢？一个函数的所有变量是紧挨着排列在内存中的。这就加快了访问速度。

#### 堆

- 堆是程序内存中的一个区域，用来存储那些在编译时大小未知的类型。
- 这里说的堆是内存中的一个区域，不是数据结构中的堆
- 在堆上的变量必须通过指针才能被访问到。

#### 使用Box在堆上分配和释放内存

- 例子：

``` rust
fn main() {
    let a = Box::new(1); // 在堆上分配内存， a 为指向整数的引用，
    let b = Box::new(1);
    let c = Box::new(1);
    let result1 = *a + *b + *c;
    drop(a); // drop() 用于在对象所在的作用域结束之前删除对象，实现了Drop的类型，就会有一个drop方法，但是在用户代码中显式调用它是不合法的。而使用std::mem::drop则可以绕过这个规则
    let d = Box::new(1);
    let result2 = *b + *c + *d;
    println!("{} {}", result1, result2)
}
```

#### 小结

- 堆和栈是由操作系统和编程语言提供的抽象概念。从CPU的角度看他们并不存在。
